[{"F:\\workspace\\vscode\\react-admin-client\\src\\App.js":"1","F:\\workspace\\vscode\\react-admin-client\\src\\index.js":"2","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\login\\login.js":"3","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\admin\\admin.js":"4","F:\\workspace\\vscode\\react-admin-client\\src\\api\\ajax.js":"5","F:\\workspace\\vscode\\react-admin-client\\src\\api\\index.js":"6","F:\\workspace\\vscode\\react-admin-client\\src\\utils\\memoryUtils.js":"7","F:\\workspace\\vscode\\react-admin-client\\src\\utils\\storageUtils.js":"8","F:\\workspace\\vscode\\react-admin-client\\src\\components\\left-nav\\index.js":"9","F:\\workspace\\vscode\\react-admin-client\\src\\components\\header\\index.js":"10","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\category\\category.js":"11","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\home\\home.js":"12","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\charts\\pie.js":"13","F:\\workspace\\vscode\\react-admin-client\\src\\config\\menuConfig.js":"14","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\charts\\line.js":"15","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\user\\user.js":"16","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\product.js":"17","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\role\\role.js":"18","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\charts\\bar.js":"19","F:\\workspace\\vscode\\react-admin-client\\src\\utils\\dateUtils.js":"20","F:\\workspace\\vscode\\react-admin-client\\src\\components\\link-button\\index.js":"21","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\category\\add-form.js":"22","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\category\\update-form.js":"23","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\detail.js":"24","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\add-update.js":"25","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\home.js":"26","F:\\workspace\\vscode\\react-admin-client\\src\\utils\\constants.js":"27","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\pictures-wall.js":"28"},{"size":562,"mtime":1612410475156,"results":"29","hashOfConfig":"30"},{"size":434,"mtime":1614048240397,"results":"31","hashOfConfig":"30"},{"size":3380,"mtime":1613910762317,"results":"32","hashOfConfig":"30"},{"size":1877,"mtime":1614051362364,"results":"33","hashOfConfig":"30"},{"size":538,"mtime":1613880090829,"results":"34","hashOfConfig":"30"},{"size":2707,"mtime":1614068547255,"results":"35","hashOfConfig":"30"},{"size":77,"mtime":1613910402070,"results":"36","hashOfConfig":"30"},{"size":894,"mtime":1613910744793,"results":"37","hashOfConfig":"30"},{"size":1987,"mtime":1614130650284,"results":"38","hashOfConfig":"30"},{"size":2976,"mtime":1614068407440,"results":"39","hashOfConfig":"30"},{"size":7009,"mtime":1614044351017,"results":"40","hashOfConfig":"30"},{"size":344,"mtime":1613957243147,"results":"41","hashOfConfig":"30"},{"size":268,"mtime":1612410475166,"results":"42","hashOfConfig":"30"},{"size":1569,"mtime":1613909796027,"results":"43","hashOfConfig":"30"},{"size":271,"mtime":1612410475165,"results":"44","hashOfConfig":"30"},{"size":271,"mtime":1612410475217,"results":"45","hashOfConfig":"30"},{"size":838,"mtime":1614069226546,"results":"46","hashOfConfig":"30"},{"size":271,"mtime":1612410475217,"results":"47","hashOfConfig":"30"},{"size":268,"mtime":1612410475165,"results":"48","hashOfConfig":"30"},{"size":341,"mtime":1613906929932,"results":"49","hashOfConfig":"30"},{"size":171,"mtime":1613909777643,"results":"50","hashOfConfig":"30"},{"size":1355,"mtime":1613999427563,"results":"51","hashOfConfig":"30"},{"size":864,"mtime":1613999439532,"results":"52","hashOfConfig":"30"},{"size":3546,"mtime":1614069937315,"results":"53","hashOfConfig":"30"},{"size":6978,"mtime":1614140309146,"results":"54","hashOfConfig":"30"},{"size":5185,"mtime":1614153930086,"results":"55","hashOfConfig":"30"},{"size":115,"mtime":1614061524758,"results":"56","hashOfConfig":"30"},{"size":2746,"mtime":1614140263354,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"14kntol",{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109","usedDeprecatedRules":"60"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"F:\\workspace\\vscode\\react-admin-client\\src\\App.js",[],["116","117"],"F:\\workspace\\vscode\\react-admin-client\\src\\index.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\login\\login.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\admin\\admin.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\api\\ajax.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\api\\index.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\utils\\memoryUtils.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\utils\\storageUtils.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\components\\left-nav\\index.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\components\\header\\index.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\category\\category.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\home\\home.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\charts\\pie.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\config\\menuConfig.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\charts\\line.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\user\\user.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\product.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\role\\role.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\charts\\bar.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\utils\\dateUtils.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\components\\link-button\\index.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\category\\add-form.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\category\\update-form.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\detail.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\add-update.js",["118","119"],"import React, { Component } from \"react\";\r\nimport {\r\n  Card,\r\n  Form,\r\n  Input,\r\n  Cascader,\r\n  Upload,\r\n  Button,\r\n  InputNumber,\r\n  message,\r\n} from \"antd\";\r\nimport { LeftOutlined } from \"@ant-design/icons\";\r\n\r\nimport PicturesWall from './pictures-wall'\r\n\r\nimport { reqCategorys } from \"../../api\";\r\n\r\nconst { Item } = Form;\r\nconst { TextArea } = Input;\r\n\r\n// product的添加和更新子路由\r\nclass ProductAddUpdate extends Component {\r\n  formRef = React.createRef();\r\n\r\n  state = {\r\n    options: [],\r\n  };\r\n\r\n  // 初始化options数组\r\n  initOptions = async (categorys) => {\r\n    const options = categorys.map((item) => ({\r\n      value: item._id,\r\n      label: item.name,\r\n      isLeaf: false,\r\n    }));\r\n\r\n    // 如果是一个二级分类商品的更新\r\n    const { isUpdate, product } = this;\r\n    const { pCategoryId } = product;\r\n    if (isUpdate && pCategoryId !== \"0\") {\r\n      // 获取对应的二级分类列表\r\n      const subCategorys = await this.getCategorys(pCategoryId);\r\n      // 生成二级下拉列表的options\r\n      const childOptions = subCategorys.map((c) => ({\r\n        value: c._id,\r\n        label: c.name,\r\n        isLeaf: true,\r\n      }));\r\n\r\n      // 找到当前商品对应的一级option对象\r\n      const targetOption = options.find(\r\n        (option) => option.value === pCategoryId\r\n      );\r\n\r\n      // 关联对应的一级option上\r\n      targetOption.children = childOptions;\r\n    }\r\n\r\n    this.setState({\r\n      options,\r\n    });\r\n    //console.log(options);\r\n  };\r\n\r\n  // 异步获取一级二级分类列表\r\n  getCategorys = async (parentId) => {\r\n    const result = await reqCategorys(parentId);\r\n    if (result.status === 0) {\r\n      const categorys = result.data;\r\n      if (parentId === \"0\") {\r\n        // 一级列表\r\n        this.initOptions(categorys);\r\n      } else {\r\n        return categorys;\r\n      }\r\n    } else {\r\n      message.error(\"获取分类列表失败\");\r\n    }\r\n  };\r\n\r\n  // 加载下一级的回调\r\n  loadData = async (selectedOptions) => {\r\n    // 得到选择的option对象\r\n    const targetOption = selectedOptions[selectedOptions.length - 1];\r\n    // 显示加载\r\n    targetOption.loading = true;\r\n    // 根据选择的option对象，异步获取二级列表\r\n    // console.log(targetOption);\r\n    const subCategorys = await this.getCategorys(targetOption.value);\r\n    // console.log('subCategorys',subCategorys);\r\n    // 关闭加载\r\n    targetOption.loading = false;\r\n    // 将二级列表挂到一级列表上\r\n    if (subCategorys && subCategorys.length > 0) {\r\n      const childOption = subCategorys.map((item) => ({\r\n        value: item._id,\r\n        label: item.name,\r\n        isLeaf: false,\r\n      }));\r\n      targetOption.children = childOption;\r\n    } else {\r\n      //当前选中分类没有二级分类\r\n      targetOption.isLeaf = true;\r\n    }\r\n    this.setState({\r\n      options: [...this.state.options],\r\n    });\r\n  };\r\n\r\n  onChange = (value, selectedOptions) => {\r\n    //console.log(value, selectedOptions);\r\n  };\r\n\r\n  onFinish = (values) => {\r\n    console.log(values);\r\n  };\r\n\r\n  UNSAFE_componentWillMount() {\r\n    const state = this.props.location.state;\r\n    this.isUpdate = !!state;\r\n    if (state !== undefined) {\r\n      this.product = state.product;\r\n    } else {\r\n      this.product = {};\r\n    }\r\n    //console.log(this.product);\r\n    //console.log(this.isUpdate);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCategorys(\"0\");\r\n  }\r\n\r\n  render() {\r\n    const { options } = this.state;\r\n    const { isUpdate, product } = this;\r\n    // 接收级联分类ID的数组\r\n    const categoryIds = [];\r\n    if (isUpdate) {\r\n      if (product.pCategoryId === \"0\") {\r\n        categoryIds.push(product.pCategoryId);\r\n      } else {\r\n        categoryIds.push(product.pCategoryId);\r\n        categoryIds.push(product.categoryId);\r\n      }\r\n    }\r\n\r\n    const formItemLayout = {\r\n      labelCol: { span: 1 },\r\n    };\r\n\r\n    const title = (\r\n      <span>\r\n        <Button\r\n          icon={<LeftOutlined />}\r\n          style={{ marginRight: 15 }}\r\n          onClick={() => this.props.history.goBack()}\r\n        ></Button>\r\n        <span>{isUpdate ? \"修改商品\" : \"添加商品\"}</span>\r\n      </span>\r\n    );\r\n\r\n    return (\r\n      <Card title={title}>\r\n        <Form ref={this.formRef} {...formItemLayout} onFinish={this.onFinish}>\r\n          <Item\r\n            name=\"name\"\r\n            label=\"商品名称\"\r\n            initialValue={product.name}\r\n            rules={[{ required: true, message: \"必须输入商品名称\" }]}\r\n          >\r\n            <Input\r\n              placeholder=\"请输入商品名称\"\r\n              style={{ width: 300, marginLeft: 10 }}\r\n            />\r\n          </Item>\r\n          <Item\r\n            name=\"desc\"\r\n            label=\"商品描述\"\r\n            initialValue={product.desc}\r\n            rules={[{ required: true, message: \"必须输入商品描述\" }]}\r\n          >\r\n            <TextArea\r\n              autoSize={{ minRows: 2, maxRows: 6 }}\r\n              placeholder=\"请输入商品描述\"\r\n              style={{ width: 400, marginLeft: 10 }}\r\n            />\r\n          </Item>\r\n          <Item\r\n            name=\"price\"\r\n            label=\"商品价格\"\r\n            initialValue={product.price}\r\n            rules={[\r\n              { required: true, message: \"必须输入商品价格\" },\r\n              {\r\n                pattern: /^[0-9e]+$/,\r\n                message: \"必须是数字，且大于等于0\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input\r\n              min={1}\r\n              max={99999999}\r\n              type=\"number\"\r\n              placeholder=\"请输入商品价格\"\r\n              addonAfter=\"元\"\r\n              style={{ width: 300, marginLeft: 10 }}\r\n            />\r\n          </Item>\r\n          <Item\r\n            name=\"categoryIds\"\r\n            label=\"商品分类\"\r\n            initialValue={categoryIds}\r\n            rules={[{ required: true, message: \"必须指定商品分类\" }]}\r\n          >\r\n            <Cascader\r\n              style={{ width: 300, marginLeft: 10 }}\r\n              options={options} // 需要显示的数据\r\n              loadData={this.loadData} // 点击列表选型，加载下一级列表的监听回调\r\n              onChange={this.onChange} // 选择完成后的回调\r\n              changeOnSelect\r\n              placeholder=\"请选择商品分类\"\r\n            />\r\n          </Item>\r\n          <Item label=\"商品图片\">\r\n            <PicturesWall/>\r\n          </Item>\r\n          <Item label=\"商品详情\">\r\n            <TextArea\r\n              autoSize={{ minRows: 4, maxRows: 6 }}\r\n              placeholder=\"请输入商品详情\"\r\n              style={{ width: 300, marginLeft: 10 }}\r\n            />\r\n          </Item>\r\n          <Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              提交\r\n            </Button>\r\n          </Item>\r\n        </Form>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ProductAddUpdate;\r\n","F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\home.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\utils\\constants.js",[],"F:\\workspace\\vscode\\react-admin-client\\src\\pages\\product\\pictures-wall.js",[],{"ruleId":"120","replacedBy":"121"},{"ruleId":"122","replacedBy":"123"},{"ruleId":"124","severity":1,"message":"125","line":7,"column":3,"nodeType":"126","messageId":"127","endLine":7,"endColumn":9},{"ruleId":"124","severity":1,"message":"128","line":9,"column":3,"nodeType":"126","messageId":"127","endLine":9,"endColumn":14},"no-native-reassign",["129"],"no-negated-in-lhs",["130"],"no-unused-vars","'Upload' is defined but never used.","Identifier","unusedVar","'InputNumber' is defined but never used.","no-global-assign","no-unsafe-negation"]